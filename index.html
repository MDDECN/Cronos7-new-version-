<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cronos 7 | Global Network</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <style>
        :root { --primary: #00a2ff; --bg: #050505; --panel: #111; --text: #fff; --border: #222; }
        body.light-mode { --bg: #f0f2f5; --panel: #fff; --text: #111; --border: #ddd; }
        body { background: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; margin: 0; transition: 0.3s; }
        .hidden { display: none !important; }

        /* AUTH SCREEN */
        .auth-container { height: 100vh; display: flex; justify-content: center; align-items: center; }
        .auth-box { background: var(--panel); padding: 30px; border-radius: 15px; border: 1px solid var(--border); width: 100%; max-width: 350px; text-align: center; }
        
        input { width: 100%; padding: 12px; margin: 10px 0; background: #000; border: 1px solid #333; color: white; border-radius: 6px; box-sizing: border-box; }
        body.light-mode input { background: #fff; border: 1px solid #ccc; color: #000; }
        
        button { width: 100%; padding: 12px; background: var(--primary); color: white; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .switch-auth { font-size: 12px; color: var(--primary); cursor: pointer; margin-top: 15px; display: block; }

        /* DASHBOARD */
        .main-layout { display: grid; grid-template-columns: 250px 1fr; height: 100vh; }
        .sidebar { background: var(--panel); border-right: 1px solid var(--border); padding: 20px; }
        .content { padding: 40px; overflow-y: auto; text-align: left; }
        .tab { animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body id="body">

    <div id="auth-screen" class="auth-container">
        <div class="auth-box">
            <h1 id="auth-title">CRIAR CONTA</h1>
            <p id="auth-subtitle" style="font-size: 14px; color: #666;">Junte-se ao Cronos 7</p>
            
            <input type="text" id="user-name-input" placeholder="Nome de Usu√°rio">
            <input type="email" id="email-input" placeholder="Seu melhor E-mail">
            <input type="password" id="pass-input" placeholder="Senha (m√≠n. 6 caracteres)">
            
            <button id="auth-btn" onclick="handleAuth()">CADASTRAR</button>
            <span class="switch-auth" id="toggle-auth" onclick="toggleAuthMode()">J√° tem conta? Fazer Login</span>
        </div>
    </div>

    <div id="app-screen" class="main-layout hidden">
        <div class="sidebar">
            <h2 style="color: var(--primary);">CRONOS 7</h2>
            <p id="nav-user" style="font-size: 14px; font-weight: bold;">@user</p>
            <hr style="border: 0; border-top: 1px solid var(--border); margin: 20px 0;">
            <div onclick="showTab('home')" style="cursor:pointer; margin: 10px 0;">üè† Feed Global</div>
            <div onclick="showTab('profile')" style="cursor:pointer; margin: 10px 0;">üë§ Meu Perfil</div>
            <div onclick="showTab('settings')" style="cursor:pointer; margin: 10px 0;">‚öôÔ∏è Configura√ß√µes</div>
            <button onclick="logout()" style="background: #ff4444; margin-top: 50px;">Sair</button>
        </div>

        <div class="content">
            <div id="tab-home" class="tab">
                <h1>Feed da Comunidade</h1>
                <p>Aqui aparecer√£o os projetos de todos os usu√°rios cadastrados.</p>
            </div>

            <div id="tab-profile" class="tab hidden">
                <h1 id="display-name">Carregando...</h1>
                <p id="display-email" style="color: var(--primary);"></p>
                <div style="background: var(--panel); padding: 20px; border: 1px solid var(--border); border-radius: 10px;">
                    <h3>Meus Projetos</h3>
                    <p style="font-size: 14px; color: #666;">Ainda n√£o tens projetos publicados.</p>
                </div>
            </div>

            <div id="tab-settings" class="tab hidden">
                <h1>Configura√ß√µes</h1>
                <button onclick="document.getElementById('body').classList.toggle('light-mode')">Mudar Tema (Claro/Escuro)</button>
            </div>
        </div>
    </div>

    <script>
        // CONFIGURA√á√ÉO DO FIREBASE (Miguel, substitui isto pelo que copiares do teu painel)
        const firebaseConfig = {
            apiKey: "COLA_AQUI_A_TUA_API_KEY",
            authDomain: "cronos7.firebaseapp.com",
            projectId: "cronos7",
            storageBucket: "cronos7.appspot.com",
            messagingSenderId: "0000000000",
            appId: "1:00000000:web:000000"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        let isLoginMode = false;

        function toggleAuthMode() {
            isLoginMode = !isLoginMode;
            document.getElementById('auth-title').innerText = isLoginMode ? "LOGIN" : "CRIAR CONTA";
            document.getElementById('auth-btn').innerText = isLoginMode ? "ENTRAR" : "CADASTRAR";
            document.getElementById('user-name-input').classList.toggle('hidden', isLoginMode);
            document.getElementById('toggle-auth').innerText = isLoginMode ? "N√£o tem conta? Cadastre-se" : "J√° tem conta? Fazer Login";
        }

        async function handleAuth() {
            const email = document.getElementById('email-input').value;
            const pass = document.getElementById('pass-input').value;
            const name = document.getElementById('user-name-input').value;

            try {
                if (isLoginMode) {
                    await auth.signInWithEmailAndPassword(email, pass);
                } else {
                    const res = await auth.createUserWithEmailAndPassword(email, pass);
                    // Salva o nome do usu√°rio no banco de dados
                    await db.collection('users').doc(res.user.uid).set({
                        name: name,
                        email: email,
                        bio: "Dev iniciante no Cronos 7"
                    });
                }
            } catch (error) {
                alert("Erro: " + error.message);
            }
        }

        // Observador de Login (Fica de olho se o usu√°rio est√° logado)
        auth.onAuthStateChanged(user => {
            if (user) {
                document.getElementById('auth-screen').classList.add('hidden');
                document.getElementById('app-screen').classList.remove('hidden');
                loadUserData(user.uid);
            } else {
                document.getElementById('auth-screen').classList.remove('hidden');
                document.getElementById('app-screen').classList.add('hidden');
            }
        });

        async function loadUserData(uid) {
            const doc = await db.collection('users').doc(uid).get();
            if (doc.exists) {
                const data = doc.data();
                document.getElementById('nav-user').innerText = "@" + data.name;
                document.getElementById('display-name').innerText = data.name;
                document.getElementById('display-email').innerText = data.email;
            }
        }

        function showTab(name) {
            document.querySelectorAll('.tab').forEach(t => t.classList.add('hidden'));
            document.getElementById('tab-' + name).classList.remove('hidden');
        }

        function logout() { auth.signOut(); }
    </script>
</body>
</html>
